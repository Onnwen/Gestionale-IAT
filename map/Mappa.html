<!DOCTYPE html>

<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<div class="container-fluid p-5 bg-dark text-white text-center">
    <h1>Mappa delle varie attivita</h1>
    <p>In questa mappa puoi trovare tutti i punti di interesse</p>
</div>

<body onload="init()">

    <!-- <button onclick="placeRandomMarker()">Place Marker</button>-->
    <div class="container mt-5">
        <div class="row">
            <div class="col-sm-4">
                <h3>Info</h3>
                <p>In questa mappa troverai tutte le info che cerchi</p>
                <p>inserire indice</p>
            </div>
            <div class="col-sm-4">


                <div id="map" style="height:600px; width: 1000px;"></div>

            </div>
        </div>
        <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
        <script type="text/javascript">
            var map, mappingLayer, vectorLayer, selectMarkerControl, selectedFeature;

            function onFeatureSelect(feature) {
                selectedFeature = feature;
                popup = new OpenLayers.Popup.FramedCloud("tempId", feature.geometry.getBounds().getCenterLonLat(),
                    null,
                    selectedFeature.attributes.salutation + " from Lat:" + selectedFeature.attributes.Lat +
                    " Lon:" + selectedFeature.attributes.Lon,
                    null, true);
                feature.popup = popup;
                map.addPopup(popup);
            }

            function onFeatureUnselect(feature) {
                map.removePopup(feature.popup);
                feature.popup.destroy();
                feature.popup = null;
            }

            function init() {
                map = new OpenLayers.Map('map');
                mappingLayer = new OpenLayers.Layer.OSM("Simple OSM Map");

                map.addLayer(mappingLayer);
                vectorLayer = new OpenLayers.Layer.Vector("Vector Layer", {
                    projection: "EPSG:4326"
                });
                selectMarkerControl = new OpenLayers.Control.SelectFeature(vectorLayer, {
                    onSelect: onFeatureSelect,
                    onUnselect: onFeatureUnselect
                });
                map.addControl(selectMarkerControl);

                selectMarkerControl.activate();
                map.addLayer(vectorLayer);
                map.setCenter(
                    new OpenLayers.LonLat(0, 0).transform(
                        new OpenLayers.Projection("EPSG:4326"),
                        map.getProjectionObject())

                    , 1
                );
            }

            /*function placeRandomMarker() {
                var randomLat = Math.floor((Math.random() * 180) - 90);
                var randomLon = Math.floor((Math.random() * 180) - 90);
                var randomLonLat = new OpenLayers.Geometry.Point(randomLon, randomLat);
                randomLonLat.transform("EPSG:4326", map.getProjectionObject());
                var randomFeature = new OpenLayers.Feature.Vector(randomLonLat, {
                    salutation: "hello world",
                    Lon: randomLon,
                    Lat: randomLat
                });
                vectorLayer.addFeatures(randomFeature);
                var popup = new OpenLayers.Popup.FramedCloud("tempId", new OpenLayers.LonLat(randomLon, randomLat)
                    .transform("EPSG:4326", map.getProjectionObject()),
                    null,
                    randomFeature.attributes.salutation + " from Lat:" + randomFeature.attributes.Lat + " Lon:" +
                    randomFeature.attributes.Lon,
                    null, true);
                randomFeature.popup = popup;
                map.addPopup(popup);
            }*/
        </script>
</body>

</html>